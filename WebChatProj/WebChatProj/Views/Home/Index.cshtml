@using WebChatProj.Entities;
@model WebChatProj.ViewModels.Home.AddFriendVM
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Site.cshtml";
}
@{ 
    List<Avatar> avatars = (List<Avatar>)ViewData["avatars"];
    List<User> friends = (List<User>)ViewData["friends"];
}

<h2>Index</h2>

@if (Session["loggedUser"] != null)
{
    <h4>Friends:</h4><br/>
    <fieldset>
        <legend>Add Friend</legend>
        <form action="/Home/AddFriend" method="post">
            @Html.LabelFor(m => m.Username)
            @Html.TextBoxFor(m => m.Username)
            @Html.ValidationMessageFor(m => m.Username)<br />
            <input class="left" type="submit" value="Add" /><br />
            <div class="left">@Html.ValidationMessage("NotFound")</div>
        </form>
    </fieldset>
    if (ViewData["friends"] != null)
    {
        for(int i = 0; i < friends.Count; i++)
        {
            <div class="row">
                <div class="col-1">
                    <img height="12em" src="@avatars[i].avatar" /> @friends[i].Username <a href="/Home/RemoveFriend?id=@friends[i].Id">Remove Friend</a>
                </div>
            </div>
        }
    }
    <hr />
    
    <h4>Groups:</h4><br/>
    if (ViewData["groups"] != null)
    {
        foreach (var item in (List<Group>)ViewData["groups"])
        {
            <div class="row">
                <div class="col-1">
                    <a href="/Chat/GroupChat?groupID=@item.Id">@item.Name</a>
                </div>
            </div>
        }
    }
}
else
{
    <img src="https://i.imgur.com/VlKl2c9.png" />
}